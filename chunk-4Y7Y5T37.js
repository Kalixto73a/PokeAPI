import{a as R}from"./chunk-ADQKBRF6.js";import{a as d,b as D,c as B,d as Y,e as U,f as Z}from"./chunk-UUQCR2PH.js";import{b as X}from"./chunk-MQOW2MR6.js";import{A as k,B as S,C as I,D as P,E,F as T,G as F,H as $,I as j,J,M as L,O as Q,b as H,d as W,f as h,g as y,h as w,i as N,j as z,l as K,m as s,n as c,o as f,p as l,q as G,r,s as o,t as m,u as V,v as _,w as p,y as u,z as C}from"./chunk-DKTK7E62.js";var A=(()=>{class n{constructor(e){this.http=e}getPokemonSpeciesData(e){return this.http.get(`${e}`)}static{this.\u0275fac=function(t){return new(t||n)(y(j))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var q=(()=>{class n{constructor(e){this.http=e}getPokemonEvolutionChain(e){return this.http.get(`${e}`)}static{this.\u0275fac=function(t){return new(t||n)(y(j))}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var x=H(X());var me=n=>({background:n});function ce(n,g){if(n&1){let e=V();r(0,"img",9),_("click",function(){N(e);let i=p().$implicit,a=p(2);return z(a.openEvolutionPopup(i.evolution_details))}),o()}}function pe(n,g){if(n&1){let e=V();r(0,"div",5),_("click",function(){let i=N(e).$implicit,a=p(2);return z(a.changePokemon(a.getPokemonIdFromSpeciesUrl(i.species.url)))}),m(1,"app-sprite-for-each-pokemon",6),r(2,"span",7),u(3),o(),f(4,ce,1,0,"img",8),o()}if(n&2){let e=g.$implicit,t=p(2);l("ngStyle",P(4,me,t.pokemonTypesMap[t.getPokemonIdFromSpeciesUrl(e.species.url)]?t.getCardBackgroundForPokemon(t.pokemonTypesMap[t.getPokemonIdFromSpeciesUrl(e.species.url)]):"#fff")),s(),l("pokemonId",t.getPokemonIdFromSpeciesUrl(e.species.url)),s(2),C(e.species.name),s(),l("ngIf",e.evolution_details.length)}}function ue(n,g){if(n&1&&(r(0,"div",1)(1,"h3",2),u(2,"Evolution Chain"),o(),r(3,"div",3),f(4,pe,5,6,"div",4),o()()),n&2){let e=p();s(4),l("ngForOf",e.getEvolutionChainOfPokemon(e.evolutionChain.chain))}}var ee=(()=>{class n{constructor(e,t,i){this.speciesService=e,this.evolutionChainService=t,this.detailsForEachPokemonService=i}ngOnInit(){this.initializeValues()}initializeValues(){this.loading=!1,this.evolutionChain=null,this.pokemonTypesMap={},this.getEvolutionChainUrlFormSpecies()}getEvolutionChainUrlFormSpecies(){this.speciesUrl&&(this.loading=!0,this.speciesService.getPokemonSpeciesData(this.speciesUrl).subscribe({next:e=>{let t=e.evolution_chain?.url;t&&this.evolutionChainService.getPokemonEvolutionChain(t).subscribe(i=>{this.evolutionChain=i;let a=this.getEvolutionChainOfPokemon(i.chain).map(v=>{let b=this.getPokemonIdFromSpeciesUrl(v.species.url);return this.detailsForEachPokemonService.getDetailsOfPokemon(b)});W(a).subscribe(v=>{v.forEach(b=>{let ie=Number(b.id);this.pokemonTypesMap[ie]=b.types}),this.loading=!1})})},error:()=>{this.loading=!1,x.default.fire({icon:"error",title:"Oops...",html:"There was an error loading the Pok\xE9mon evolution chain.<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Reload Page",confirmButtonColor:"#FF0000"}).then(e=>{e.isConfirmed&&window.location.reload()})}}))}getEvolutionChainOfPokemon(e){let t=[];return e&&(t.push(e),e.evolves_to.forEach(i=>{t.push(...this.getEvolutionChainOfPokemon(i))})),t}getPokemonIdFromSpeciesUrl(e){if(!e)return 0;let t=e.split("/").filter(i=>i);return+t[t.length-1]}loadPokemonTypes(e){this.pokemonTypesMap[e]||this.detailsForEachPokemonService.getDetailsOfPokemon(e).subscribe(t=>{this.pokemonTypesMap[e]=t.types})}getValidEvolutionRequirements(e){return e?(console.log(e),e.filter(t=>t.gender!=null||t.held_item?.name!=null||t.item?.name!=null||t.known_move?.name!=null||t.known_move_type?.name!=null||t.location!=null||t.min_affection!=null||t.min_beauty!=null||t.min_damage_taken!=null||t.min_happiness!=null||t.min_level!=null||t.min_move_count!=null||t.min_steps!=null||t.needs_overworld_rain!=null||t.needs_multiplayer!=null||t.party_species!=null||t.party_type!=null||t.relative_physical_stats!=null||t.time_of_day!=null||t.trade_species!=null||t.turn_upside_down!=null||t.trigger?.name!=null||t.used_move?.name!=null)):[]}getTriggerText(e){if(!e.trigger)return"";switch(e.trigger.name){case"level-up":return e.min_happiness&&e.time_of_day?`Having a minimum happiness of  ${e.min_happiness} at ${e.time_of_day}`:e.min_happiness&&e.known_move_type?`Having a minimum happiness of  ${e.min_happiness} and knowing ${this.toTitleCase(e.known_move_type.name)} type movement`:e.min_affection&&e.known_move_type?`Having a minimum affection of ${e.min_affection} hearts and knowing ${this.toTitleCase(e.known_move_type.name)} type movement`:e.min_level&&e.party_type?`Evolves at level ${e.min_level} with a ${e.party_type.name} type pokemon on the team`:e.min_level&&e.turn_upside_down?`Evolves at level ${e.min_level} and turning the console upside down`:e.min_level&&e.relative_physical_stats!==null?`Evolves at level ${e.min_level} and ${this.getPhysicalStatsText(e.relative_physical_stats)}`:e.min_level&&e.time_of_day?`Evolves at level ${e.min_level} at ${e.time_of_day}`:e.min_level&&e.needs_overworld_rain?`Evolves at level ${e.min_level} and while it rains`:e.min_beauty?`Having minimum beauty of ${e.min_beauty}`:e.min_steps?`Walking a minimum of ${e.min_steps} steps`:e.min_affection?`Having a minimum affection of ${e.min_affection} hearts`:e.min_happiness?`Having a minimum happiness of  ${e.min_happiness}`:e.party_species?`Having ${this.toTitleCase(e.party_species.name)} in the team`:e.location?`Leveling up in ${this.toTitleCase(e.location.name)}`:e.min_level?`Evolves at level ${e.min_level}`:e.min_steps?"minumum steps walked":e.known_move?`Knowing ${this.toTitleCase(e.known_move.name.replace("-"," "))}`:"level up";case"use-item":return e.item&&e.gender?`Being ${this.getGenderTypeText(e.gender)} and using ${this.toTitleCase(e.item.name.replace("-"," "))}`:e.item?`Using ${this.toTitleCase(e.item.name.replace("-"," "))}`:"Using an item";case"trade":return e.trade_species?`Trading for a ${this.toTitleCase(e.trade_species.name)}`:e.held_item?`Tading the pokemon holding ${this.toTitleCase(e.held_item.name.replace("-"," "))}`:"Trading";case"use-move":return e.min_move_count?`Using ${e.used_move?.name} ${e.min_move_count} times`:"Using a specific move specific times";case"three-critical-hits":return"Dealing three critical hits in only one combat";case"shed":return"If there is a space in the team + a pokeball";case"strong-style-move":return"using strong-style";case"spin":return"spinning with a sweet equiped on the pokemon";case"take-damage":return`Receive damage until having ${e.min_damage_taken} hp`;case"recoil-damage":return`Taking ${e.min_damage_taken} hp by recoil damage`;case"tower-of-darkness":return"Chossing tower of Darkness or using Scroll of Darkness";case"tower-of-waters":return"Choosing tower of Waters or using Scroll of Waters";default:return e.trigger.name.replace("-"," ")}}getPhysicalStatsText(e){if(e==null)return"";switch(e){case-1:return"Attack < Defense";case 0:return"Attack = Defense";case 1:return"Attack > Defense";default:return"Unknown condition"}}getGenderTypeText(e){if(e==null)return"";switch(e){case 1:return"Female";case 2:return"Male";default:return"Unknown gender"}}buildEvolutionRequirements(e){let t=[];return e.forEach(i=>{if(i.trigger?.name){let a=this.getTriggerText(i);t.push(a)}}),t}openEvolutionPopup(e){if(!e.length){x.default.fire({icon:"info",title:"Evolution",text:"This pokemon dont have special requirements.",theme:"dark"});return}let t=e.filter(a=>a.trigger?.name).map(a=>this.getTriggerText(a));if(!t.length){x.default.fire({icon:"info",title:"Evolution",text:"This pokemon does not have special requirements.",theme:"dark"});return}let i=`
    <ul style="text-align:center">
      ${t.map(a=>`<li>\u2022 ${a}</li>`).join("")}
    </ul>
  `;x.default.fire({icon:"info",title:"Evolution Requirements",html:i,theme:"dark",confirmButtonText:"Thanks"})}toTitleCase(e){return e.replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase())}getCardBackgroundForPokemon(e){return this.calculateCardBackground(e)}calculateCardBackground(e){if(!e||e.length===0)return"#fff";let t=e.map(i=>B[i.type.name]??"#777");return t.length===1?t[0]:`linear-gradient(135deg, ${t.join(", ")})`}changePokemon(e){let t=this.getRegionByPokemonId(e);window.location.assign(`/PokeAPI/region/${t}/pokemon/${e}`)}getRegionByPokemonId(e){return e>=1&&e<=151?1:e>=152&&e<=251?2:e>=252&&e<=386?3:e>=387&&e<=493?4:e>=494&&e<=649?5:e>=650&&e<=721?6:e>=722&&e<=809?7:e>=810&&e<=905?8:e>=906&&e<=1010?9:1}static{this.\u0275fac=function(t){return new(t||n)(c(A),c(q),c(d))}}static{this.\u0275cmp=w({type:n,selectors:[["app-pokemon-evolution-chain"]],inputs:{speciesUrl:"speciesUrl"},standalone:!0,features:[S([A,q,d]),I],decls:1,vars:1,consts:[["class","py-4",4,"ngIf"],[1,"py-4"],[1,"text-lg","font-semibold","mb-4","text-center"],[1,"flex","flex-wrap","justify-center","items-start","gap-4"],["class",`flex flex-col items-center p-2 rounded-xl font-bold 
                w-36 sm:w-40 md:w-48 lg:w-[400px] xl:w-[400px]
                h-[350px] bg-white/30 border-2 border-black`,3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","p-2","rounded-xl","font-bold","w-36","sm:w-40","md:w-48","lg:w-[400px]","xl:w-[400px]","h-[350px]","bg-white/30","border-2","border-black",3,"click","ngStyle"],[1,"w-24","h-24","sm:w-28","sm:h-28","md:w-32","md:h-32","lg:w-64","lg:h-64","rounded-full","overflow-hidden","flex","items-center","justify-center",3,"pokemonId"],[1,"mt-2","font-medium","text-center","uppercase","mb-2"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770229765/imgbin_9dfad48a770f2f4bc9fde3a1a5c6fb7c_s7cmyu.png","class","w-8 h-8 mt-2 cursor-pointer mb-4","draggable","false","alt","",3,"click",4,"ngIf"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770229765/imgbin_9dfad48a770f2f4bc9fde3a1a5c6fb7c_s7cmyu.png","draggable","false","alt","",1,"w-8","h-8","mt-2","cursor-pointer","mb-4",3,"click"]],template:function(t,i){t&1&&f(0,ue,5,1,"div",0),t&2&&l("ngIf",!i.loading&&i.evolutionChain)},dependencies:[$,E,T,F,D]})}}return n})();var M=H(X());var te={1:"kanto",2:"johto",3:"hoenn",4:"sinnoh",5:"unova",6:"kalos",7:"alola",8:"galar",9:"hisui",10:"paldea"};var ne=(()=>{class n{constructor(){this.selectedRegionId=null}setRegion(e){this.selectedRegionId=e,localStorage.setItem("regionId",e.toString())}getRegionId(){let e=localStorage.getItem("regionId");return this.selectedRegionId??(e?+e:null)}getRegionImage(){let e=this.getRegionId();return e?R[e]:null}getRegionName(){let e=this.getRegionId();return e?te[e]:null}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fe=n=>({background:n});function de(n,g){if(n&1&&(r(0,"div",28)(1,"div",29),u(2),o(),r(3,"div",30),u(4),o(),r(5,"div",31),m(6,"div",32),o()()),n&2){let e=g.$implicit,t=g.index,i=p();s(2),k(" ",e.stat.name," "),s(2),k(" ",e.base_stat," "),s(2),G("width",i.statsWidths[t]||0,"%")}}function he(n,g){if(n&1&&m(0,"img",33),n&2){let e=p();l("src",e.getRegionImage(e.regionId),K)}}function ve(n,g){if(n&1&&m(0,"app-pokemon-evolution-chain",34),n&2){let e=p();l("speciesUrl",e.pokemon.species.url)}}var Ne=(()=>{class n{constructor(e,t,i,a,v){this.detailsForEachPokemonService=e,this.regionState=t,this.regionDetailsService=i,this.route=a,this.router=v}ngOnInit(){this.initializeValues()}initializeValues(){this.loading=!1,this.pokemon={},this.regionId=null,this.regionImage=R,this.statsBackground="",this.statsWidths=[],this.getIdByUrl()}getIdByUrl(){this.loading=!0,this.route.paramMap.subscribe(e=>{this.regionId=Number(e.get("id")),this.pokemonId=Number(e.get("pokemonId")),this.regionId&&this.pokemonId?(this.getRegionDetails(),this.loadPokemonDetails(),this.loading=!1):M.default.fire({icon:"error",title:"Oops...",html:"An Error Ocurred<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Retry",confirmButtonColor:"#FF0000"}).then(t=>{t.isConfirmed&&window.location.reload()})})}getRegionDetails(){this.loading=!0,this.regionId!==null&&this.regionDetailsService.getRegionDetails(this.regionId).subscribe({next:e=>{this.regionName=e.name,this.regionId=e.id,this.loading=!1},error:()=>{M.default.fire({icon:"error",title:"Oops...",html:"An Error Ocurred<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Retry",confirmButtonColor:"#FF0000"}).then(e=>{e.isConfirmed&&window.location.reload()})}})}loadPokemonDetails(){this.loading=!0,this.pokemonId&&this.detailsForEachPokemonService.getDetailsOfPokemon(this.pokemonId).subscribe({next:e=>{this.pokemon=e,this.updateStatsBackground(),this.animateStats(),this.loading=!1},error:()=>{M.default.fire({icon:"error",title:"Oops...",html:"An Error Ocurred<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Retry",confirmButtonColor:"#FF0000"}).then(e=>{e.isConfirmed&&window.location.reload()})}})}getWeightInKg(e){return(e/10).toFixed(1)}updateStatsBackground(){this.pokemon?.types&&(this.statsBackground=this.calculateCardBackground(this.pokemon.types))}calculateCardBackground(e){if(!e||e.length===0)return"#fff";let t=e.map(i=>B[i.type.name]??"#777");return t.length===1?t[0]:`linear-gradient(135deg, ${t.join(", ")})`}animateStats(){this.pokemon?.stats&&(this.statsWidths=this.pokemon.stats.map(()=>0),setTimeout(()=>{this.statsWidths=this.pokemon.stats.map(e=>e.base_stat/255*100)},50))}goBack(){let e=this.regionId;this.router.navigate(["region",e])}getRegionImage(e){return this.regionImage[e]}static{this.\u0275fac=function(t){return new(t||n)(c(d),c(ne),c(U),c(L),c(Q))}}static{this.\u0275cmp=w({type:n,selectors:[["app-pokemon-details"]],inputs:{pokemonId:"pokemonId"},standalone:!0,features:[S([d,U]),I],decls:34,vars:12,consts:[[1,"max-w-full","mx-auto","p-4","lg:p-6","space-y-6","font-bold","uppercase"],[1,"grid","grid-cols-12","gap-4","lg:gap-6","items-start","lg:items-stretch","relative"],[1,"absolute","top-4","left-4","w-10","h-10","rounded-full","border-2","border-black","flex","items-center","justify-center","cursor-pointer","bg-[#D54346]"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/a_hflip/v1770232568/flecha-correcta_prf5p2.png",1,"w-6","h-6",3,"click"],[1,"col-span-12","lg:col-span-4","flex","flex-col","items-center","space-y-3","bg-white/30","rounded-2xl","p-3","lg:p-4"],[1,"w-40","h-40","lg:w-[300px]","lg:h-[300px]","rounded-full","overflow-hidden","border-4","bg-black","flex","items-center","justify-center","px-4","py-1","uppercase","rounded-full","shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]"],[3,"pokemonId"],[1,"flex","flex-wrap","justify-center","gap-2","lg:gap-3","mt-2"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770235926/farp_medium_wall_texture_product_750x1000.u1_1_psdlgx.png","alt","",1,"w-14","h-14","cursor-pointer"],[1,"w-12","h-12","lg:w-14","lg:h-14","rounded-full","bg-[#5889c3]","flex","items-center","justify-center","font-bold","text-black","border-black","border-4","shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]","cursor-pointer"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770234327/genero-masculino_qk6ya0.png","alt","",1,"w-8","h-8"],[1,"w-12","h-12","lg:w-14","lg:h-14","rounded-full","bg-[#f64f4b]","flex","items-center","justify-center","font-bold","text-black","border-black","border-4","shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]","cursor-pointer"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770234326/signo-de-las-mujeres_hmas9s.png","alt","",1,"w-8","h-8"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770234616/Shine_rmz6tl.png","draggable","false","alt","",1,"w-14","h-14","cursor-pointer"],[1,"flex","flex-row","justify-center","items-center","w-full","space-x-12"],[1,"flex","flex-col","justify-center","items-center","text-center","space-y-1","mt-2"],[1,"uppercase","font-bold","text-xl","lg:text-2xl"],[1,"flex","justify-center","items-center","w-24","h-24","bg-cover","bg-center",2,"background-image",'url("https://res.cloudinary.com/dzfqdntdw/image/upload/v1770231053/kilogramo_mbfvwr.png")'],[1,"text-black","mt-4","lg:text-xs","font-semibold"],[1,"flex","justify-center","flex-wrap","mt-2","w-full"],[1,"col-span-12","lg:col-span-5","rounded-2xl","p-3","lg:p-4","border-4","border-black","text-black","flex","flex-col","justify-center",3,"ngStyle"],[1,"text-center","uppercase","font-bold","text-lg","lg:text-xl","mb-3"],["class","flex items-center justify-between gap-2 lg:gap-4 font-semibold mb-2",4,"ngFor","ngForOf"],[1,"col-span-12","lg:col-span-3","flex","flex-col","items-center","justify-center","space-y-3","bg-white/30","rounded-2xl","p-3","lg:p-4","border-4","border-black","text-black"],[1,"uppercase","font-bold","text-lg","lg:text-xl"],["alt","Region image","class","w-32 lg:w-full h-auto rounded-xl border-4 border-black","draggable","false",3,"src",4,"ngIf"],[1,"bg-white/30","rounded-2xl","p-3","lg:p-4","border-4","border-black","text-black","items-center","justify-center"],["class","flex flex-wrap items-center justify-center",3,"speciesUrl",4,"ngIf"],[1,"flex","items-center","justify-between","gap-2","lg:gap-4","font-semibold","mb-2"],[1,"w-32","lg:w-40","uppercase","text-sm","lg:text-base"],[1,"w-10","lg:w-12","text-right","text-sm","lg:text-base"],[1,"flex-1","h-3","lg:h-4","bg-black","rounded-full","overflow-hidden"],[1,"h-full","bg-white","rounded-full","transition-all","duration-1000","ease-in-out"],["alt","Region image","draggable","false",1,"w-32","lg:w-full","h-auto","rounded-xl","border-4","border-black",3,"src"],[1,"flex","flex-wrap","items-center","justify-center",3,"speciesUrl"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),_("click",function(){return i.goBack()}),o()(),r(4,"div",4)(5,"div",5),m(6,"app-sprite-for-each-pokemon",6),o(),r(7,"div",7),m(8,"img",8),r(9,"div",9),m(10,"img",10),o(),r(11,"div",11),m(12,"img",12),o(),m(13,"img",13),o(),r(14,"div",14)(15,"div",15)(16,"div",16),u(17),o(),m(18,"app-pokemon-number",6),o(),r(19,"div",17)(20,"div",18),u(21),o()()(),r(22,"div",19),m(23,"app-pokemon-types",6),o()(),r(24,"div",20)(25,"h3",21),u(26," Stats "),o(),f(27,de,7,4,"div",22),o(),r(28,"div",23)(29,"h3",24),u(30),o(),f(31,he,1,1,"img",25),o()(),r(32,"div",26),f(33,ve,1,1,"app-pokemon-evolution-chain",27),o()()),t&2&&(s(6),l("pokemonId",i.pokemonId),s(11),k(" ",i.pokemon.name," "),s(),l("pokemonId",i.pokemonId),s(3),k(" ",i.getWeightInKg(i.pokemon.weight)," kg "),s(2),l("pokemonId",i.pokemonId),s(),l("ngStyle",P(10,fe,i.statsBackground)),s(3),l("ngForOf",i.pokemon.stats),s(3),C(i.regionName),s(),l("ngIf",i.regionId),s(2),l("ngIf",i.pokemon.species))},dependencies:[J,Z,Y,D,$,E,T,F,ee]})}}return n})();export{Ne as PokemonDetailsComponent};
