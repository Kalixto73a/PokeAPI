import{a as S,b as U}from"./chunk-W5U7AZVQ.js";import{$ as L,B as m,C as V,E as d,F as f,I as D,J as h,M as a,N as s,Q as _,R as O,T as k,U as E,V as j,Z as g,_ as l,d as w,ga as N,h as F,ia as M,ka as v,la as I,m as u,ma as A,p as y,r as p,u as T}from"./chunk-CPGWRHBB.js";var n=(()=>{class t{constructor(e){this.http=e}getDetailsOfPokemon(e){return this.http.get(`${S.apiUrl}pokemon/${e}`)}static{this.\u0275fac=function(o){return new(o||t)(y(I))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var b=(()=>{class t{constructor(e){this.http=e}getPokemonSpeciesData(e){return this.http.get(`${S.apiUrl}pokemon-species/${e}/`)}static{this.\u0275fac=function(o){return new(o||t)(y(I))}}static{this.\u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var B=w(U());var ae=(()=>{class t{constructor(e,o){this.spriteService=e,this.speciesService=o,this.load=new m,this.variantTypesChanged=new m,this.variantsLoaded=new m}ngOnInit(){this.shiny=!1,this.selectedVariantIndex=0,this.allVariantsData=[],this.allVariantNames=[]}ngOnChanges(e){e.pokemonId&&(this.allVariantsData=[],this.allVariantNames=[],this.loadSprites()),e.selectedVariantIndex&&this.allVariantsData.length&&this.emitCurrentVariantTypes()}loadSprites(){this.spriteService.getDetailsOfPokemon(this.pokemonId).subscribe({next:e=>{this.allVariantsData=[{artwork:e.sprites.other["official-artwork"],types:e.types,hasShiny:!!e.sprites.front_shiny}],this.speciesService.getPokemonSpeciesData(this.pokemonId).subscribe(o=>{let i=o.varieties.filter(r=>!r.is_default).map(r=>this.extractIdFromUrl(r.pokemon.url));if(this.allVariantNames=o.varieties.map(r=>r.pokemon.name),i.length===0){this.emitVariantsLoaded();return}let P=i.map(r=>this.spriteService.getDetailsOfPokemon(r));F(P).subscribe(r=>{r.filter(c=>c!==null).forEach(c=>{this.allVariantsData.push({artwork:c.sprites.other["official-artwork"],types:c.types,hasShiny:!!c.sprites.front_shiny})}),this.emitVariantsLoaded()})})},error:()=>{B.default.fire({icon:"error",title:"Oops...",html:"There was an error loading sprites.<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Retry",confirmButtonColor:"#FF0000"}).then(e=>{e.isConfirmed&&window.location.reload()})}})}extractIdFromUrl(e){let o=e.split("/").filter(i=>i);return+o[o.length-1]}get frontArtwork(){let e=this.allVariantsData[this.selectedVariantIndex];if(e)return this.shiny?e.artwork.front_shiny:e.artwork.front_default}emitVariantsLoaded(){this.variantsLoaded.emit({count:this.allVariantsData.length,names:this.allVariantNames,hasShiny:this.allVariantsData.map(e=>e.hasShiny)}),this.emitCurrentVariantTypes()}emitCurrentVariantTypes(){let e=this.allVariantsData[this.selectedVariantIndex];e&&this.variantTypesChanged.emit(e.types.map(o=>o.type.name))}static{this.\u0275fac=function(o){return new(o||t)(f(n),f(b))}}static{this.\u0275cmp=p({type:t,selectors:[["app-sprite-for-each-pokemon"]],inputs:{pokemonId:"pokemonId",shiny:"shiny",selectedVariantIndex:"selectedVariantIndex"},outputs:{load:"load",variantTypesChanged:"variantTypesChanged",variantsLoaded:"variantsLoaded"},standalone:!0,features:[g([n,b]),T,l],decls:1,vars:1,consts:[["draggable","false","alt","Pok\xE9mon Sprite",1,"w-full","h-[200px]",3,"load","src"]],template:function(o,i){o&1&&(a(0,"img",0),_("load",function(){return i.load.emit()}),s()),o&2&&h("src",i.frontArtwork,V)},dependencies:[v,A]})}}return t})();var pe=(()=>{class t{formatPokemonId(e){return e.toString().padStart(3,"0")}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=p({type:t,selectors:[["app-pokemon-number"]],inputs:{pokemonId:"pokemonId"},standalone:!0,features:[l],decls:2,vars:1,consts:[[1,"text-[1rem]"]],template:function(o,i){o&1&&(a(0,"h2",0),k(1),s()),o&2&&(d(),E("#"+i.formatPokemonId(i.pokemonId)))}})}}return t})();var R={normal:"#9fa09e",fire:"#e72828",water:"#2881ef",electric:"#fbc100",grass:"#3fa028",ice:"#3fd9fe",fighting:"#fe8100",poison:"#8e40cb",ground:"#915121",flying:"#80b8ef",psychic:"#ef4179",bug:"#90a019",rock:"#aea881",ghost:"#714171",dragon:"#5060e0",dark:"#51413e",steel:"#60a0b9",fairy:"#ef70ee"};var z=w(U());var J=t=>({"background-color":t});function G(t,x){if(t&1&&(a(0,"span",2),k(1),s()),t&2){let e=x.$implicit,o=O();h("ngStyle",L(2,J,o.getTypeColor(e.type.name))),d(),j(" ",e.type.name," ")}}var ve=(()=>{class t{constructor(e){this.typesService=e,this.typesLoaded=new m}ngOnInit(){this.initializeValues(),!this.types.length&&this.pokemonId&&this.loadTypesOfThePokemon()}initializeValues(){this.types=[]}loadTypesOfThePokemon(){this.typesService.getDetailsOfPokemon(this.pokemonId).subscribe({next:e=>{this.types=e.types.map(o=>({slot:o.slot,type:{name:o.type.name}})),this.typesLoaded.emit({pokemonId:this.pokemonId,types:this.types})},error:()=>{z.default.fire({icon:"error",title:"Oops...",html:"There was an error loading types.<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Retry",confirmButtonColor:"#FF0000"}).then(e=>{e.isConfirmed&&window.location.reload()})}})}getTypeColor(e){return R[e]??"#777"}static{this.\u0275fac=function(o){return new(o||t)(f(n))}}static{this.\u0275cmp=p({type:t,selectors:[["app-pokemon-types"]],inputs:{types:"types",pokemonId:"pokemonId"},outputs:{typesLoaded:"typesLoaded"},standalone:!0,features:[g([n]),l],decls:2,vars:1,consts:[[1,"flex","justify-center","items-center","gap-4","pt-2"],["class","border-2 border-black px-4 py-1 uppercase rounded-full shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]",3,"ngStyle",4,"ngFor","ngForOf"],[1,"border-2","border-black","px-4","py-1","uppercase","rounded-full","shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]",3,"ngStyle"]],template:function(o,i){o&1&&(a(0,"div",0),D(1,G,2,4,"span",1),s()),o&2&&(d(),h("ngForOf",i.types))},dependencies:[v,N,M]})}}return t})();var K={1:"kanto",2:"johto",3:"hoenn",4:"sinnoh",5:"unova",6:"kalos",7:"alola",8:"galar",9:"hisui",10:"paldea"},Se=Object.fromEntries(Object.entries(K).map(([t,x])=>[x,Number(t)]));export{n as a,b,ae as c,pe as d,R as e,ve as f,K as g,Se as h};
