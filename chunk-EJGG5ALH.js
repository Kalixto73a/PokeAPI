import{a as J}from"./chunk-ADQKBRF6.js";import{a as h,b as $,c as j,d as Q,e as X}from"./chunk-LAXJG7SX.js";import{b as L}from"./chunk-O6KF2NHD.js";import{A as a,B as H,C as r,D as o,E as m,F as O,G as f,H as c,J as p,K as b,L as k,M as w,N as I,O as C,P as S,Q as P,R as E,S as T,T as F,U as V,X as W,Z as K,d as q,g as G,k as _,n as x,o as y,r as D,s as B,w as A,x as s,y as g,z as u}from"./chunk-FEF2B2A6.js";var v=(()=>{class n{constructor(e){this.http=e}getPokemonSpeciesData(e){return this.http.get(`${e}`)}static{this.\u0275fac=function(t){return new(t||n)(x(F))}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var R=(()=>{class n{constructor(e){this.http=e}getPokemonEvolutionChain(e){return this.http.get(`${e}`)}static{this.\u0275fac=function(t){return new(t||n)(x(F))}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var U=q(L());var Z=[{regionId:1,range:[[1,151]]},{regionId:2,range:[[152,251]]},{regionId:3,range:[[252,386]]},{regionId:4,range:[[387,493]]},{regionId:5,range:[[494,649]]},{regionId:6,range:[[650,721]]},{regionId:7,range:[[722,809]]},{regionId:9,range:[899,900,901,902,903,904]},{regionId:8,range:[[810,905]]},{regionId:10,range:[[906,1025]]}];var ee={[-1]:"Attack < Defense",0:"Attack = Defense",1:"Attack > Defense"};var te={1:"Female",2:"Male"};var me=n=>({background:n});function ce(n,d){if(n&1){let e=O();r(0,"img",9),f("click",function(i){D(e);let l=c().$implicit;return c(2).openEvolutionPopup(l.evolution_details),B(i.stopPropagation())}),o()}}function pe(n,d){if(n&1){let e=O();r(0,"div",5),f("click",function(){let i=D(e).$implicit,l=c(2);return B(l.changePokemon(l.getPokemonIdFromSpeciesUrl(i.species.url)))}),m(1,"app-sprite-for-each-pokemon",6),r(2,"span",7),p(3),o(),u(4,ce,1,0,"img",8),o()}if(n&2){let e=d.$implicit,t=c(2);a("ngStyle",C(5,me,t.pokemonTypesMap[t.getPokemonIdFromSpeciesUrl(e.species.url)]?t.getCardBackgroundForPokemon(t.pokemonTypesMap[t.getPokemonIdFromSpeciesUrl(e.species.url)]):"#fff")),s(),a("pokemonId",t.getPokemonIdFromSpeciesUrl(e.species.url))("spriteIndex",0),s(2),b(e.species.name),s(),a("ngIf",e.evolution_details.length)}}function ge(n,d){if(n&1&&(r(0,"div",1)(1,"h3",2),p(2,"Evolution Chain"),o(),r(3,"div",3),u(4,pe,5,7,"div",4),o()()),n&2){let e=c();s(4),a("ngForOf",e.getEvolutionChainOfPokemon(e.evolutionChain.chain))}}var ie=(()=>{class n{constructor(e,t,i){this.speciesService=e,this.evolutionChainService=t,this.detailsForEachPokemonService=i}ngOnInit(){this.initializeValues()}initializeValues(){this.loading=!1,this.evolutionChain=null,this.pokemonTypesMap={},this.getEvolutionChainUrlFromSpecies()}getEvolutionChainUrlFromSpecies(){this.speciesUrl&&(this.loading=!0,this.speciesService.getPokemonSpeciesData(this.speciesUrl).subscribe({next:e=>{let t=e.evolution_chain?.url;t&&this.evolutionChainService.getPokemonEvolutionChain(t).subscribe(i=>this.processEvolutionChain(i))},error:()=>{this.loading=!1,U.default.fire({icon:"error",title:"Oops...",html:"There was an error loading the Pok\xE9mon evolution chain.<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Reload Page",confirmButtonColor:"#FF0000"}).then(e=>{e.isConfirmed&&window.location.reload()})}}))}processEvolutionChain(e){this.evolutionChain=e;let t=this.getEvolutionChainOfPokemon(e.chain).map(i=>this.detailsForEachPokemonService.getDetailsOfPokemon(this.getPokemonIdFromSpeciesUrl(i.species.url)));G(t).subscribe(i=>{i.forEach(l=>{this.pokemonTypesMap[Number(l.id)]=l.types}),this.loading=!1})}getEvolutionChainOfPokemon(e){let t=[];return e&&(t.push(e),e.evolves_to.forEach(i=>t.push(...this.getEvolutionChainOfPokemon(i)))),t}getPokemonIdFromSpeciesUrl(e){let t=e.split("/").filter(i=>i);return+t[t.length-1]}getCardBackgroundForPokemon(e){if(!e||e.length===0)return"#fff";let t=e.map(i=>j[i.type.name]??"#777");return t.length===1?t[0]:`linear-gradient(135deg, ${t.join(", ")})`}changePokemon(e){let t=this.getRegionByPokemonId(e);window.location.assign(`/PokeAPI/region/${t}/pokemon/${e}`)}getRegionByPokemonId(e){for(let t of Z){let i=t.range;if(Array.isArray(i[0])){for(let[l,M]of i)if(e>=l&&e<=M)return t.regionId}else if(i.includes(e))return t.regionId}return 1}getTriggerText(e){if(!e.trigger)return"";switch(e.trigger.name){case"level-up":return e.min_happiness&&e.time_of_day?`Having a minimum happiness of  ${e.min_happiness} at ${e.time_of_day}`:e.min_happiness&&e.known_move_type?`Having a minimum happiness of  ${e.min_happiness} and knowing ${this.toTitleCase(e.known_move_type.name)} type movement`:e.min_affection&&e.known_move_type?`Having a minimum affection of ${e.min_affection} hearts and knowing ${this.toTitleCase(e.known_move_type.name)} type movement`:e.min_level&&e.party_type?`Evolves at level ${e.min_level} with a ${e.party_type.name} type pokemon on the team`:e.min_level&&e.turn_upside_down?`Evolves at level ${e.min_level} and turning the console upside down`:e.min_level&&e.relative_physical_stats!==null?`Evolves at level ${e.min_level} and ${this.getPhysicalStatsText(e.relative_physical_stats)}`:e.min_level&&e.time_of_day?`Evolves at level ${e.min_level} at ${e.time_of_day}`:e.min_level&&e.needs_overworld_rain?`Evolves at level ${e.min_level} and while it rains`:e.min_beauty?`Having minimum beauty of ${e.min_beauty}`:e.min_steps?`Walking a minimum of ${e.min_steps} steps`:e.min_affection?`Having a minimum affection of ${e.min_affection} hearts`:e.min_happiness?`Having a minimum happiness of  ${e.min_happiness}`:e.party_species?`Having ${this.toTitleCase(e.party_species.name)} in the team`:e.location?`Leveling up in ${this.toTitleCase(e.location.name)}`:e.min_level?`Evolves at level ${e.min_level}`:e.min_steps?"minumum steps walked":e.known_move?`Knowing ${this.toTitleCase(e.known_move.name.replace("-"," "))} and leveling up`:"level up";case"use-item":return e.item&&e.gender?`Being ${this.getGenderTypeText(e.gender)} and using ${this.toTitleCase(e.item.name.replace("-"," "))}`:e.item?`Using ${this.toTitleCase(e.item.name.replace("-"," "))}`:"Using an item";case"trade":return e.trade_species?`Trading for a ${this.toTitleCase(e.trade_species.name)}`:e.held_item?`Tading the pokemon holding ${this.toTitleCase(e.held_item.name.replace("-"," "))}`:"Trading";case"use-move":return e.min_move_count?`Using ${e.used_move?.name} ${e.min_move_count} times`:"Using a specific move specific times";case"three-critical-hits":return"Dealing three critical hits in only one combat";case"shed":return"If there is a space in the team + a pokeball";case"strong-style-move":return e.min_move_count?`Using an strong-style move ${e.min_move_count} times`:"Using an strong-style move specific times";case"spin":return"spinning with a sweet equiped on the pokemon";case"take-damage":return`Receive damage until having ${e.min_damage_taken} hp`;case"recoil-damage":return`Taking ${e.min_damage_taken} hp by recoil damage`;case"tower-of-darkness":return"Chossing tower of Darkness or using Scroll of Darkness";case"tower-of-waters":return"Choosing tower of Waters or using Scroll of Waters";case"agile-style-move":return e.min_move_count?`Using an agile-style move ${e.min_move_count} times`:"Using an agile-style move specific times";default:return e.trigger.name.replace("-"," ")}}openEvolutionPopup(e){if(!e.length){U.default.fire({icon:"info",title:"Evolution",text:"This pokemon does not have special requirements.",theme:"dark"});return}let t=`<ul style="text-align:center">
      ${e.filter(i=>i.trigger?.name).map(i=>`<li>\u2022 ${this.getTriggerText(i)}</li>`).join("")}
    </ul>`;U.default.fire({icon:"info",title:"Evolution Requirements",html:t,theme:"dark",confirmButtonText:"Thanks"})}getPhysicalStatsText(e){return e==null?"":ee[e]??"Unknown condition"}toTitleCase(e){return e.replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase())}getGenderTypeText(e){return e==null?"":te[e]??"Unknown gender"}static{this.\u0275fac=function(t){return new(t||n)(g(v),g(R),g(h))}}static{this.\u0275cmp=y({type:n,selectors:[["app-pokemon-evolution-chain"]],inputs:{speciesUrl:"speciesUrl"},standalone:!0,features:[w([v,R,h]),I],decls:1,vars:1,consts:[["class","py-4",4,"ngIf"],[1,"py-4"],[1,"text-lg","font-semibold","mb-4","text-center"],[1,"flex","flex-wrap","justify-center","items-start","gap-4"],["class",`flex flex-col items-center p-2 rounded-xl font-bold 
                w-36 sm:w-40 md:w-48 lg:w-[400px] xl:w-[400px]
                h-[350px] bg-white/30 border-2 border-black`,3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","p-2","rounded-xl","font-bold","w-36","sm:w-40","md:w-48","lg:w-[400px]","xl:w-[400px]","h-[350px]","bg-white/30","border-2","border-black",3,"click","ngStyle"],[1,"w-24","h-24","sm:w-28","sm:h-28","md:w-32","md:h-32","lg:w-64","lg:h-64","rounded-full","overflow-hidden","flex","items-center","justify-center",3,"pokemonId","spriteIndex"],[1,"mt-2","font-medium","text-center","uppercase","mb-2"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770229765/imgbin_9dfad48a770f2f4bc9fde3a1a5c6fb7c_s7cmyu.png","class","w-8 h-8 mt-2 cursor-pointer mb-4","draggable","false","alt","",3,"click",4,"ngIf"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770229765/imgbin_9dfad48a770f2f4bc9fde3a1a5c6fb7c_s7cmyu.png","draggable","false","alt","",1,"w-8","h-8","mt-2","cursor-pointer","mb-4",3,"click"]],template:function(t,i){t&1&&u(0,ge,5,1,"div",0),t&2&&a("ngIf",!i.loading&&i.evolutionChain)},dependencies:[T,S,P,E,$]})}}return n})();var N=q(L());var ne={1:"kanto",2:"johto",3:"hoenn",4:"sinnoh",5:"unova",6:"kalos",7:"alola",8:"galar",9:"hisui",10:"paldea"};var oe={"generation-i":1,"generation-ii":2,"generation-iii":3,"generation-iv":4,"generation-v":5,"generation-vi":6,"generation-vii":7,"generation-viii":8,"generation-ix":10};var de=n=>({background:n});function ue(n,d){if(n&1&&(r(0,"div",30)(1,"div",31),p(2),o(),r(3,"div",32),p(4),o(),r(5,"div",33),m(6,"div",34),o()()),n&2){let e=d.$implicit,t=d.index,i=c();s(2),k(" ",e.stat.name," "),s(2),k(" ",e.base_stat," "),s(2),H("width",i.statsWidths[t]||0,"%")}}function fe(n,d){if(n&1&&m(0,"img",35),n&2){let e=c();a("src",e.originRegionImage,A)}}function he(n,d){if(n&1&&m(0,"app-pokemon-evolution-chain",36),n&2){let e=c();a("speciesUrl",e.pokemon.species.url)}}var We=(()=>{class n{constructor(e,t,i,l){this.detailsForEachPokemonService=e,this.pokemonSpeciesService=t,this.route=i,this.router=l,this.hisuiPokemonIds=[899,900,901,902,903,904]}ngOnInit(){this.initializeValues()}initializeValues(){this.loading=!1,this.pokemon={},this.regionId=null,this.originRegionId=null,this.originRegionName=null,this.originRegionImage=null,this.statsBackground="",this.statsWidths=[],this.selectedGender="male",this.isShiny=!1,this.getIdByUrl()}getIdByUrl(){this.loading=!0,this.route.paramMap.subscribe(e=>{this.regionId=Number(e.get("id")),this.pokemonId=Number(e.get("pokemonId")),this.regionId&&this.pokemonId?(this.loadPokemonDetails(),this.loading=!1):N.default.fire({icon:"error",title:"Oops...",html:"An Error Ocurred<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Retry",confirmButtonColor:"#FF0000"}).then(t=>{t.isConfirmed&&window.location.reload()})})}loadPokemonDetails(){this.loading=!0,this.pokemonId&&this.detailsForEachPokemonService.getDetailsOfPokemon(this.pokemonId).subscribe({next:e=>{this.pokemon=e,e?.species?.url&&this.pokemonSpeciesService.getPokemonSpeciesData(e.species.url).subscribe(t=>{let i=t.generation?.name;this.hisuiPokemonIds.includes(this.pokemonId)?this.originRegionId=9:this.originRegionId=oe[i]??0,this.originRegionName=ne[this.originRegionId],this.originRegionImage=J[this.originRegionId]}),this.updateStatsBackground(),this.animateStats(),this.loading=!1},error:()=>{N.default.fire({icon:"error",title:"Oops...",html:"An Error Ocurred<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Retry",confirmButtonColor:"#FF0000"}).then(e=>{e.isConfirmed&&window.location.reload()})}})}getWeightInKg(e){return(e/10).toFixed(1)}updateStatsBackground(){this.pokemon?.types&&(this.statsBackground=this.calculateCardBackground(this.pokemon.types))}calculateCardBackground(e){if(!e||e.length===0)return"#fff";let t=e.map(i=>j[i.type.name]??"#777");return t.length===1?t[0]:`linear-gradient(135deg, ${t.join(", ")})`}animateStats(){this.pokemon?.stats&&(this.statsWidths=this.pokemon.stats.map(()=>0),setTimeout(()=>{this.statsWidths=this.pokemon.stats.map(e=>e.base_stat/255*100)},50))}goBack(){let e=this.regionId;this.router.navigate(["region",e])}showMale(){this.selectedGender="male"}showFemale(){this.selectedGender="female"}toggleShiny(){this.isShiny=!this.isShiny}static{this.\u0275fac=function(t){return new(t||n)(g(h),g(v),g(W),g(K))}}static{this.\u0275cmp=y({type:n,selectors:[["app-pokemon-details"]],inputs:{pokemonId:"pokemonId"},standalone:!0,features:[w([h,v]),I],decls:37,vars:15,consts:[[1,"max-w-full","mx-auto","p-4","lg:p-6","space-y-6","font-bold","uppercase"],[1,"grid","grid-cols-12","gap-4","lg:gap-6","items-start","lg:items-stretch","relative"],[1,"absolute","top-4","left-4","w-10","h-10","rounded-full","border-2","border-black","flex","items-center","justify-center","cursor-pointer","bg-[#D54346]"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/a_hflip/v1770232568/flecha-correcta_prf5p2.png",1,"w-6","h-6",3,"click"],[1,"col-span-12","lg:col-span-4","flex","flex-col","items-center","space-y-3","bg-white/30","rounded-2xl","p-3","lg:p-4"],[1,"w-40","h-40","lg:w-[300px]","lg:h-[300px]","rounded-full","overflow-hidden","border-4","bg-black","flex","items-center","justify-center","px-4","py-1","uppercase","rounded-full","shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]"],[3,"pokemonId","gender","shiny"],[1,"flex","flex-wrap","justify-center","gap-2","lg:gap-3","mt-2"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770235926/farp_medium_wall_texture_product_750x1000.u1_1_psdlgx.png","alt","",1,"w-14","h-14","cursor-pointer"],[1,"w-12","h-12","lg:w-14","lg:h-14","rounded-full","bg-[#5889c3]","flex","items-center","justify-center","font-bold","text-black","border-black","border-4","shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]","cursor-pointer"],[3,"click"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770234327/genero-masculino_qk6ya0.png","alt","",1,"w-8","h-8"],[1,"w-12","h-12","lg:w-14","lg:h-14","rounded-full","bg-[#f64f4b]","flex","items-center","justify-center","font-bold","text-black","border-black","border-4","shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]","cursor-pointer"],["src","https://res.cloudinary.com/dzfqdntdw/image/upload/v1770234326/signo-de-las-mujeres_hmas9s.png","alt","",1,"w-8","h-8"],["draggable","false","alt","",1,"w-14","h-14","cursor-pointer",3,"src"],[1,"flex","flex-row","justify-center","items-center","w-full","space-x-12"],[1,"flex","flex-col","justify-center","items-center","text-center","space-y-1","mt-2"],[1,"uppercase","font-bold","text-xl","lg:text-2xl"],[3,"pokemonId"],[1,"flex","justify-center","items-center","w-24","h-24","bg-cover","bg-center",2,"background-image",'url("https://res.cloudinary.com/dzfqdntdw/image/upload/v1770231053/kilogramo_mbfvwr.png")'],[1,"text-black","mt-4","lg:text-xs","font-semibold"],[1,"flex","justify-center","flex-wrap","mt-2","w-full"],[1,"col-span-12","lg:col-span-5","rounded-2xl","p-3","lg:p-4","border-4","border-black","text-black","flex","flex-col","justify-center",3,"ngStyle"],[1,"text-center","uppercase","font-bold","text-lg","lg:text-xl","mb-3"],["class","flex items-center justify-between gap-2 lg:gap-4 font-semibold mb-2",4,"ngFor","ngForOf"],[1,"col-span-12","lg:col-span-3","flex","flex-col","items-center","justify-center","space-y-3","bg-white/30","rounded-2xl","p-3","lg:p-4","border-4","border-black","text-black"],[1,"uppercase","font-bold","text-lg","lg:text-xl"],["alt","Region image","class","w-32 lg:w-full h-auto rounded-xl border-4 border-black","draggable","false",3,"src",4,"ngIf"],[1,"bg-white/30","rounded-2xl","p-3","lg:p-4","border-4","border-black","text-black","items-center","justify-center"],["class","flex flex-wrap items-center justify-center",3,"speciesUrl",4,"ngIf"],[1,"flex","items-center","justify-between","gap-2","lg:gap-4","font-semibold","mb-2"],[1,"w-32","lg:w-40","uppercase","text-sm","lg:text-base"],[1,"w-10","lg:w-12","text-right","text-sm","lg:text-base"],[1,"flex-1","h-3","lg:h-4","bg-black","rounded-full","overflow-hidden"],[1,"h-full","bg-white","rounded-full","transition-all","duration-1000","ease-in-out"],["alt","Region image","draggable","false",1,"w-32","lg:w-full","h-auto","rounded-xl","border-4","border-black",3,"src"],[1,"flex","flex-wrap","items-center","justify-center",3,"speciesUrl"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),f("click",function(){return i.goBack()}),o()(),r(4,"div",4)(5,"div",5),m(6,"app-sprite-for-each-pokemon",6),o(),r(7,"div",7),m(8,"img",8),r(9,"div",9)(10,"button",10),f("click",function(){return i.showMale()}),m(11,"img",11),o()(),r(12,"div",12)(13,"button",10),f("click",function(){return i.showFemale()}),m(14,"img",13),o()(),r(15,"button",10),f("click",function(){return i.toggleShiny()}),m(16,"img",14),o()(),r(17,"div",15)(18,"div",16)(19,"div",17),p(20),o(),m(21,"app-pokemon-number",18),o(),r(22,"div",19)(23,"div",20),p(24),o()()(),r(25,"div",21),m(26,"app-pokemon-types",18),o()(),r(27,"div",22)(28,"h3",23),p(29," Stats "),o(),u(30,ue,7,4,"div",24),o(),r(31,"div",25)(32,"h3",26),p(33),o(),u(34,fe,1,1,"img",27),o()(),r(35,"div",28),u(36,he,1,1,"app-pokemon-evolution-chain",29),o()()),t&2&&(s(6),a("pokemonId",i.pokemonId)("gender",i.selectedGender)("shiny",i.isShiny),s(10),a("src",i.isShiny?"https://res.cloudinary.com/dzfqdntdw/image/upload/v1771177585/Shine_1_j6yoln.png":"https://res.cloudinary.com/dzfqdntdw/image/upload/v1770234616/Shine_rmz6tl.png",A),s(4),k(" ",i.pokemon.name," "),s(),a("pokemonId",i.pokemonId),s(3),k(" ",i.getWeightInKg(i.pokemon.weight)," kg "),s(2),a("pokemonId",i.pokemonId),s(),a("ngStyle",C(13,de,i.statsBackground)),s(3),a("ngForOf",i.pokemon.stats),s(3),b(i.originRegionName),s(),a("ngIf",i.regionId),s(2),a("ngIf",i.pokemon.species))},dependencies:[V,X,Q,$,T,S,P,E,ie]})}}return n})();export{We as PokemonDetailsComponent};
