import{a as S,b as H}from"./chunk-W5U7AZVQ.js";import{$ as j,B as m,C as T,E as d,F as h,I as D,J as f,M as a,N as s,Q as F,R as _,T as k,U as E,V as O,Z as g,_ as l,d as $,ga as A,h as P,ia as L,ka as v,la as I,m as u,ma as N,p as y,r as p,u as w}from"./chunk-CPGWRHBB.js";var r=(()=>{class i{constructor(e){this.http=e}getDetailsOfPokemon(e){return this.http.get(`${S.apiUrl}pokemon/${e}`)}static{this.\u0275fac=function(t){return new(t||i)(y(I))}}static{this.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var x=(()=>{class i{constructor(e){this.http=e}getPokemonSpeciesData(e){return this.http.get(`${S.apiUrl}pokemon-species/${e}/`)}static{this.\u0275fac=function(t){return new(t||i)(y(I))}}static{this.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var re=(()=>{class i{constructor(e,t){this.spriteService=e,this.speciesService=t,this.load=new m,this.variantTypesChanged=new m,this.variantsLoaded=new m}ngOnInit(){this.initializeValues()}initializeValues(){this.shiny=!1,this.selectedVariantIndex=0,this.allVariantsData=[],this.allVariantNames=[]}ngOnChanges(e){if(e.pokemonId&&(this.allVariantsData=[],this.allVariantNames=[],this.loadSprites()),e.selectedVariantIndex&&this.allVariantsData.length){this.updateCurrentArtwork();let t=this.allVariantsData[this.selectedVariantIndex];t&&this.variantTypesChanged.emit(t.types.map(o=>o.type.name))}}loadSprites(){this.spriteService.getDetailsOfPokemon(this.pokemonId).subscribe({next:e=>{this.allVariantsData=[{artwork:e.sprites.other["official-artwork"],types:e.types,hasShiny:!!e.sprites.front_shiny}],this.updateCurrentArtwork(),this.speciesService.getPokemonSpeciesData(this.pokemonId).subscribe(t=>{let o=t.varieties.filter(n=>!n.is_default).map(n=>this.extractIdFromUrl(n.pokemon.url));if(this.allVariantNames=t.varieties.map(n=>n.pokemon.name),o.length===0){this.emitVariantsLoaded();return}let b=o.map(n=>this.spriteService.getDetailsOfPokemon(n));P(b).subscribe(n=>{n.filter(c=>c!==null).forEach(c=>{this.allVariantsData.push({artwork:c.sprites.other["official-artwork"],types:c.types,hasShiny:!!c.sprites.front_shiny})}),this.updateCurrentArtwork(),this.emitVariantsLoaded()})})}})}updateVariantTypes(){let e=this.allVariantsData[this.selectedVariantIndex];e&&this.variantTypesChanged.emit(e.types.map(t=>t.type.name))}extractIdFromUrl(e){let t=e.split("/").filter(o=>o);return+t[t.length-1]}onSpriteLoaded(){this.load.emit()}updateCurrentArtwork(){this.emitCurrentVariantTypes()}get frontArtwork(){let e=this.allVariantsData[this.selectedVariantIndex];if(e)return this.shiny?e.artwork.front_shiny:e.artwork.front_default}emitVariantsLoaded(){this.variantsLoaded.emit({count:this.allVariantsData.length,names:this.allVariantNames,hasShiny:this.allVariantsData.map(e=>e.hasShiny)}),this.emitCurrentVariantTypes()}emitCurrentVariantTypes(){let e=this.allVariantsData[this.selectedVariantIndex];e&&this.variantTypesChanged.emit(e.types.map(t=>t.type.name))}static{this.\u0275fac=function(t){return new(t||i)(h(r),h(x))}}static{this.\u0275cmp=p({type:i,selectors:[["app-sprite-for-each-pokemon"]],inputs:{pokemonId:"pokemonId",shiny:"shiny",selectedVariantIndex:"selectedVariantIndex"},outputs:{load:"load",variantTypesChanged:"variantTypesChanged",variantsLoaded:"variantsLoaded"},standalone:!0,features:[g([r,x]),w,l],decls:1,vars:1,consts:[["draggable","false","alt","Pok\xE9mon Sprite",1,"w-full","h-[250px]",3,"load","src"]],template:function(t,o){t&1&&(a(0,"img",0),F("load",function(){return o.load.emit()}),s()),t&2&&f("src",o.frontArtwork,T)},dependencies:[v,N]})}}return i})();var se=(()=>{class i{formatPokemonId(e){return e.toString().padStart(3,"0")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=p({type:i,selectors:[["app-pokemon-number"]],inputs:{pokemonId:"pokemonId"},standalone:!0,features:[l],decls:2,vars:1,consts:[[1,"text-[1rem]"]],template:function(t,o){t&1&&(a(0,"h2",0),k(1),s()),t&2&&(d(),E("#"+o.formatPokemonId(o.pokemonId)))}})}}return i})();var z={normal:"#9fa09e",fire:"#e72828",water:"#2881ef",electric:"#fbc100",grass:"#3fa028",ice:"#3fd9fe",fighting:"#fe8100",poison:"#8e40cb",ground:"#915121",flying:"#80b8ef",psychic:"#ef4179",bug:"#90a019",rock:"#aea881",ghost:"#714171",dragon:"#5060e0",dark:"#51413e",steel:"#60a0b9",fairy:"#ef70ee"};var U=$(H());var q=i=>({"background-color":i});function J(i,V){if(i&1&&(a(0,"span",2),k(1),s()),i&2){let e=V.$implicit,t=_();f("ngStyle",j(2,q,t.getTypeColor(e.type.name))),d(),O(" ",e.type.name," ")}}var ge=(()=>{class i{constructor(e){this.typesService=e,this.typesLoaded=new m}ngOnInit(){this.initializeValues(),!this.types.length&&this.pokemonId&&this.loadTypesOfThePokemon()}initializeValues(){this.types=[]}loadTypesOfThePokemon(){this.typesService.getDetailsOfPokemon(this.pokemonId).subscribe({next:e=>{this.types=e.types.map(t=>({slot:t.slot,type:{name:t.type.name}})),this.typesLoaded.emit({pokemonId:this.pokemonId,types:this.types})},error:()=>{U.default.fire({icon:"error",title:"Oops...",html:"There was an error loading types.<br><br>Please reload the page and try again.",theme:"dark",confirmButtonText:"Retry",confirmButtonColor:"#FF0000"}).then(e=>{e.isConfirmed&&window.location.reload()})}})}getTypeColor(e){return z[e]??"#777"}static{this.\u0275fac=function(t){return new(t||i)(h(r))}}static{this.\u0275cmp=p({type:i,selectors:[["app-pokemon-types"]],inputs:{types:"types",pokemonId:"pokemonId"},outputs:{typesLoaded:"typesLoaded"},standalone:!0,features:[g([r]),l],decls:2,vars:1,consts:[[1,"flex","justify-center","items-center","gap-4","pt-2"],["class","border-2 border-black px-4 py-1 uppercase rounded-full shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]",3,"ngStyle",4,"ngFor","ngForOf"],[1,"border-2","border-black","px-4","py-1","uppercase","rounded-full","shadow-[0_0_8px_2px_rgba(255,255,255,0.4)]",3,"ngStyle"]],template:function(t,o){t&1&&(a(0,"div",0),D(1,J,2,4,"span",1),s()),t&2&&(d(),f("ngForOf",o.types))},dependencies:[v,A,L]})}}return i})();var G={1:"kanto",2:"johto",3:"hoenn",4:"sinnoh",5:"unova",6:"kalos",7:"alola",8:"galar",9:"hisui",10:"paldea"},Ie=Object.fromEntries(Object.entries(G).map(([i,V])=>[V,Number(i)]));export{r as a,x as b,re as c,se as d,z as e,ge as f,G as g,Ie as h};
