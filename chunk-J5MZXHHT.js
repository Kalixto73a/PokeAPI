import{b as L,c as O,d as z,e as l,f as H}from"./chunk-Y4YROFD7.js";import{b as G}from"./chunk-MQOW2MR6.js";import{B as F,C as T,D as E,E as j,F as B,G as D,H as M,I as V,J as N,M as $,O as A,b as q,d as I,e as y,f as P,g as C,h as R,i as u,j as k,m as a,n as s,o as h,p as r,r as c,s as m,t as x,u as S,v as _,w as d,y as b,z as w}from"./chunk-DKTK7E62.js";var f=(()=>{class t{constructor(e){this.http=e}getPokedexRegionByPokedexUrl(e){return this.http.get(`${e}`)}static{this.\u0275fac=function(o){return new(o||t)(C(V))}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var U={1:[1],2:[1],3:[1],4:[1],5:[1],6:[0,1,2],7:[0],8:[0,1,2],9:[0],10:[0,1,2]};var J=q(G());var W=t=>({background:t});function X(t,v){if(t&1){let e=S();c(0,"div",3),_("click",function(){let i=u(e).$implicit,n=d(2);return k(n.goToPokemonDetails(i.id))}),x(1,"app-sprite-for-each-pokemon",4),c(2,"h1",5),b(3),m(),x(4,"app-pokemon-number",6),c(5,"app-pokemon-types",7),_("typesLoaded",function(i){u(e);let n=d(2);return k(n.onTypesLoaded(i))}),m()()}if(t&2){let e=v.$implicit;r("ngStyle",E(5,W,e.cardBackground||"#fff")),a(),r("pokemonId",e.id),a(2),w(e.name),a(),r("pokemonId",e.id),a(),r("pokemonId",e.id)}}function Y(t,v){if(t&1&&(c(0,"div",1),h(1,X,6,7,"div",2),m()),t&2){let e=d();a(),r("ngForOf",e.pokemons)}}var ue=(()=>{class t{constructor(e,o,i,n){this.pokedexService=e,this.getRegionDetailsService=o,this.router=i,this.route=n}ngOnInit(){this.initializeValues()}initializeValues(){this.loading=!1,this.pokemons=[],this._regionId=null,this.pokemonTypes=[],this.cardBackground="#fff",this.changeRoute()}loadPokemonsForEachRegion(){if(this._regionId===null)return;this.loading=!0;let e=U[this._regionId];this.getRegionDetailsService.getRegionPokedex(this._regionId,e).pipe(y(o=>{let i=o.map(n=>this.pokedexService.getPokedexRegionByPokedexUrl(n.url));return I(i)})).subscribe({next:o=>{this.pokemons=o.flatMap(i=>i.pokemon_entries.map(n=>{let p=n.pokemon_species.url,g=Number(p.split("/").filter(Boolean).pop());return{name:n.pokemon_species.name,url:p,id:g}})),this.loading=!1},error:()=>{this.loading=!1,J.default.fire({icon:"error",title:"Oops...",html:"There was an error loading Pok\xE9mon from this Region.",theme:"dark"}).then(o=>{o.isConfirmed&&window.location.reload()})}})}changeRoute(){this.route.paramMap.subscribe(e=>{let o=Number(e.get("id"));o&&(this._regionId=o,this.loadPokemonsForEachRegion())})}onTypesLoaded(e){let{pokemonId:o,types:i}=e,n=this.calculateCardBackground(i),p=this.pokemons.find(g=>g.id===o);p&&(p.cardBackground=n)}calculateCardBackground(e){if(!e||e.length===0)return"#fff";let o=e.map(i=>O[i.type.name]??"#777");return o.length===1?o[0]:`linear-gradient(135deg, ${o.join(", ")})`}goToPokemonDetails(e){this._regionId!==null&&this.router.navigate([`region/${this._regionId}/pokemon/${e}`])}static{this.\u0275fac=function(o){return new(o||t)(s(f),s(l),s(A),s($))}}static{this.\u0275cmp=R({type:t,selectors:[["app-pokedex-for-each-region"]],standalone:!0,features:[F([f,l]),T],decls:1,vars:1,consts:[["class","flex flex-wrap justify-center pt-6 pb-6 gap-6 px-1",4,"ngIf"],[1,"flex","flex-wrap","justify-center","pt-6","pb-6","gap-6","px-1"],["class","flex flex-col items-center w-[100px] lg:w-[320px] lg:h-[400px] rounded-xl p-2 pb-4 transform transition-transform duration-200 hover:scale-105 font-bold",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"flex","flex-col","items-center","w-[100px]","lg:w-[320px]","lg:h-[400px]","rounded-xl","p-2","pb-4","transform","transition-transform","duration-200","hover:scale-105","font-bold",3,"click","ngStyle"],[1,"items-center",3,"pokemonId"],[1,"uppercase","gap-2","text-[0.8rem]","lg:text-[1.5rem]"],[3,"pokemonId"],[1,"flex","justify-center","items-center",3,"typesLoaded","pokemonId"]],template:function(o,i){o&1&&h(0,Y,2,1,"div",0),o&2&&r("ngIf",!i.loading)},dependencies:[M,j,B,D,L,N,z,H]})}}return t})();export{ue as PokedexForEachRegionComponent};
